local connectionURL = "ws://minerws.igsteven.com:8080/display"

local ws, err = http.websocket(connectionURL)
if not ws then
  return printError(err)
end

-- Setup Monitor
local monitor = peripheral.wrap( 'top' )
term.redirect( monitor )
monitor.clear();
monitor.setCursorPos(0,0)

ws.send("Monitor Connected - Miner!")

while true do
  local _, url, response, isBinary = os.pullEvent("websocket_message")
  if url == connectionURL then

    print(response)
    monitor.clear()
    monitor.setCursorPos(0,0)
    monitor.write(response)

    -- Don't forget to close the connection!
    -- ws.close()

    -- We've received our response and are finished.
    break
  end  
end
